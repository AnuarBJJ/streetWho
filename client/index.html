<html ng-app>
<head>
	<title>StreetWho</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<body>
	<div>Let's street</div>
	<div id="target">
	  Click here
	</div>
	<div id="other">
	  Trigger the handler
	</div>

	<form action="/getall" method="get">
	  First name: <input type="text" name="fname"><br>
	  Last name: <input type="text" name="lname"><br>
	  <input type="submit" value="Submit">
	</form>

	<button id='getall'>Get All Streets</button>

	<div class='list'></div>

</body>
<script type="text/javascript">

	$( "#target" ).click(function() {

		$.post( "/streets", { name: "Pine St"} )
		.done(function(info) {
			alert(info)
		});

	});

	$("#getall").click(function(){
		$.get("/getall")
		.done(function(info){
			info.forEach(function(strt){
				console.log(strt)
				var newDiv = "<div class='row'>" 
						+ "<div class='col-md-2'>"
						+ strt.name
						+ "</div><div class='col-md-6'><input class='form-control input-lg' placeholder='"
						+ strt.info
						+ "'></div><div class='col-md-1'><button class='btn btn-primary street-info' id=" 
						+	strt._id
						+ " type=button'>Submit</button></div>"
						+ "</div>"
				$( ".list" ).append( newDiv);
			})
		});
	});

	 $(document).on('click', 'button.street-info', function(){
	 	var id = $(this).attr('id')
	 	var info =   $(this).parent().siblings('.col-md-6').children('.form-control.input-lg').val();
 		$.post('/insertinfo', {id: id, info: info})
			.done(function(confirmation){
				console.log('something happened')
			})
     });


</script>
</html>